{"ast":null,"code":"// Downloads transcripts to txt.\nfunction fetchTranscript(job, user) {\n  // Added BOM so that it opens in UTF-8 encoding.\n  var BOM = \"\\uFEFF\";\n  var fileName = \"\".concat(job, \" (\").concat(user, \").txt\");\n  var node = document.querySelector('.transcript');\n  var transcript = BOM + node.textContent;\n  var transcriptBlob = new Blob([transcript], {\n    type: 'text/plain; charset=utf-8'\n  }); // Create a hidden link.\n\n  var downloadLink = document.createElement('a'); // Set the download file name.\n\n  downloadLink.download = fileName; // Text can be anything because it's not shown to the user.\n\n  downloadLink.innerHTML = 'My Hidden Download Link'; // We want to remove the download link once we're done.\n\n  downloadLink.onclick = function (e) {\n    return document.body.removeChild(e.target);\n  }; // Set the URL to the transcript blob.\n\n\n  downloadLink.href = window.URL.createObjectURL(transcriptBlob); // Make sure download link is never shown to user.\n\n  downloadLink.style.display = 'none'; // Append it to the document.\n\n  document.body.appendChild(downloadLink); // \"Click\" on the download link.\n\n  downloadLink.click();\n  return transcript;\n}\n\nexport { fetchTranscript };","map":null,"metadata":{},"sourceType":"module"}