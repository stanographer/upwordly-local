{"ast":null,"code":"import { db } from './firebase'; // User methods ===========================================================\n\nexport var doCreateUser = function doCreateUser(email, fullName, location, id, payment, token, username) {\n  return db.ref(\"users/\".concat(id)).set({\n    email: email,\n    fullName: fullName,\n    location: location,\n    payment: payment,\n    token: token,\n    username: username\n  });\n};\nexport var checkDupeEmail = function checkDupeEmail(email, cb) {\n  db.ref('users').orderByChild('email').equalTo(email).on('value', function (snapshot) {\n    cb(!!snapshot.val());\n  });\n};\nexport var checkDupeUsername = function checkDupeUsername(username, cb) {\n  db.ref('users').orderByChild('username').equalTo(username).on('value', function (snapshot) {\n    cb(!!snapshot.val());\n  });\n};\nexport var getUser = function getUser(uid, cb) {\n  db.ref(\"users/\".concat(uid)).once('value', function (snapshot) {\n    cb(snapshot.val());\n  })[\"catch\"](function (err) {\n    cb(err);\n  });\n};\nexport var findUser = function findUser(username) {\n  db.ref('users').orderByChild('username').equalTo(username);\n};\nexport var onceGetUsers = function onceGetUsers() {\n  return db.ref('users').once('value');\n}; // Job methods ===========================================================\n\nexport var createJob = function createJob(job, user, uid) {\n  var newJob = {\n    createdTime: new Date().toUTCString(),\n    completedTime: '',\n    locked: false,\n    shortName: job.shortName.trim().toLowerCase(),\n    speakers: !!job.speakers && job.speakers.trim(),\n    started: null,\n    title: !!job.title && job.title.trim(),\n    username: user\n  };\n  db.ref('jobs').push(newJob).then(function (job) {\n    db.ref(\"users/\".concat(uid, \"/jobs\")).push({\n      key: job.key,\n      shortName: newJob.shortName\n    });\n  });\n};\nexport var checkDupeJob = function checkDupeJob(shortName, user, cb) {\n  db.ref('jobs').orderByChild('shortName').equalTo(shortName).once('value', function (snapshot) {\n    if (!snapshot.val()) {\n      cb();\n    } else if (snapshot.val().username === user) {\n      return new Error('That job by that user already exists.');\n    }\n  })[\"catch\"](function (err) {\n    return err;\n  });\n};\nexport var getAllJobsByUser = function getAllJobsByUser(user, cb) {\n  db.ref('jobs').orderByChild('username').equalTo(user).once('value', function (snapshot) {\n    cb(snapshot.val());\n  })[\"catch\"](function (err) {\n    return err;\n  });\n};","map":null,"metadata":{},"sourceType":"module"}