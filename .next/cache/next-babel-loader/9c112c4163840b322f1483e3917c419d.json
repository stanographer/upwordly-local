{"ast":null,"code":"import { db } from './firebase'; // User methods ===========================================================\n\nexport var doCreateUser = function doCreateUser(email, fullName, location, id, payment, token, username) {\n  return db.ref(\"users/\".concat(id)).set({\n    email: email,\n    fullName: fullName,\n    location: location,\n    payment: payment,\n    token: token,\n    username: username\n  });\n};\nexport var checkDupeEmail = function checkDupeEmail(email, cb) {\n  db.ref('users').orderByChild('email').equalTo(email).on('value', function (snapshot) {\n    cb(!!snapshot.val());\n  });\n};\nexport var checkDupeUsername = function checkDupeUsername(username, cb) {\n  db.ref('users').orderByChild('username').equalTo(username).on('value', function (snapshot) {\n    cb(!!snapshot.val());\n  });\n};\nexport var getUser = function getUser(uid, cb) {\n  db.ref(\"users/\".concat(uid)).once('value', function (snapshot) {\n    cb(snapshot.val());\n  })[\"catch\"](function (err) {\n    cb(err);\n  });\n};\nexport var findUser = function findUser(username) {\n  db.ref('users').orderByChild('username').equalTo(username);\n};\nexport var onceGetUsers = function onceGetUsers() {\n  return db.ref('users').once('value');\n}; // Job methods ===========================================================\n\nexport var createJob = function createJob(job, user, uid) {\n  var newJob = {\n    createdTime: new Date().toUTCString(),\n    completedTime: '',\n    locked: false,\n    shortName: job.shortName.trim().toLowerCase(),\n    speakers: !!job.speakers && job.speakers.trim(),\n    started: null,\n    title: !!job.title && job.title.trim(),\n    username: user\n  };\n  db.ref('jobs').push(newJob).then(function (job) {\n    db.ref(\"users/\".concat(uid, \"/jobs\")).push({\n      key: job.key,\n      shortName: newJob.shortName\n    });\n  });\n};\nexport var checkDupeJob = function checkDupeJob(shortName, user, cb) {\n  db.ref('jobs').orderByChild('shortName').equalTo(shortName).once('value', function (snapshot) {\n    if (!snapshot.val()) {\n      cb();\n    } else if (snapshot.val().username === user) {\n      return new Error('That job by that user already exists.');\n    }\n  })[\"catch\"](function (err) {\n    return err;\n  });\n};\nexport var getAllJobsByUser = function getAllJobsByUser(uid, cb) {\n  return db.ref(\"users/\".concat(uid, \"/jobs\")).on('value', function (snapshot) {\n    cb(snapshot.val());\n  });\n};","map":{"version":3,"sources":["/Users/stanleysakai/Developer/upwordly-local/src/firebase/db.js"],"names":["db","doCreateUser","email","fullName","location","id","payment","token","username","ref","set","checkDupeEmail","cb","orderByChild","equalTo","on","snapshot","val","checkDupeUsername","getUser","uid","once","err","findUser","onceGetUsers","createJob","job","user","newJob","createdTime","Date","toUTCString","completedTime","locked","shortName","trim","toLowerCase","speakers","started","title","push","then","key","checkDupeJob","Error","getAllJobsByUser"],"mappings":"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","sourcesContent":["import { db } from './firebase';\n\n// User methods ===========================================================\nexport const doCreateUser = (email, fullName, location, id, payment, token, username) =>\n    db.ref(`users/${id}`)\n        .set({\n          email,\n          fullName,\n          location,\n          payment,\n          token,\n          username,\n        });\n\nexport const checkDupeEmail = (email, cb) => {\n  db.ref('users')\n      .orderByChild('email')\n      .equalTo(email)\n      .on('value', snapshot => {\n        cb(!!snapshot.val());\n      });\n};\n\nexport const checkDupeUsername = (username, cb) => {\n  db.ref('users')\n      .orderByChild('username')\n      .equalTo(username)\n      .on('value', snapshot => {\n        cb(!!snapshot.val());\n      });\n};\n\nexport const getUser = (uid, cb) => {\n  db.ref(`users/${uid}`)\n      .once('value', snapshot => {\n        cb(snapshot.val());\n      })\n      .catch(err => {\n        cb(err);\n      });\n};\n\nexport const findUser = username => {\n  db.ref('users')\n      .orderByChild('username')\n      .equalTo(username);\n};\n\nexport const onceGetUsers = () =>\n    db.ref('users')\n        .once('value');\n\n// Job methods ===========================================================\nexport const createJob = (job, user, uid) => {\n  const newJob = {\n    createdTime: new Date().toUTCString(),\n    completedTime: '',\n    locked: false,\n    shortName: job.shortName.trim().toLowerCase(),\n    speakers: !!job.speakers && job.speakers.trim(),\n    started: null,\n    title: !!job.title && job.title.trim(),\n    username: user,\n  };\n\n  db.ref('jobs')\n      .push(newJob)\n      .then(job => {\n        db.ref(`users/${uid}/jobs`)\n            .push({\n              key: job.key,\n              shortName: newJob.shortName,\n            });\n      });\n};\n\nexport const checkDupeJob = (shortName, user, cb) => {\n  db.ref('jobs')\n      .orderByChild('shortName')\n      .equalTo(shortName)\n      .once('value', snapshot => {\n        if (!snapshot.val()) {\n          cb();\n        } else if (snapshot.val().username === user) {\n          return new Error('That job by that user already exists.');\n        }\n      })\n      .catch(err => err);\n};\n\nexport const getAllJobsByUser = (uid, cb) => {\n  return db.ref(`users/${uid}/jobs`)\n      .on('value', snapshot => {\n        cb(snapshot.val());\n      });\n};\n\n"]},"metadata":{},"sourceType":"module"}