{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/stanleysakai/Developer/upwordly-local/src/helpers/withAuth.js\";\nimport React, { Fragment } from 'react';\nimport dynamic from 'next/dynamic';\nimport router from 'next/router';\nimport { auth } from '../firebase/firebase';\nimport * as ROUTES from '../constants/routes';\nvar NavLogo = dynamic(function () {\n  return import('../components/Logos/NavLogo');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../components/Logos/NavLogo')];\n    },\n    modules: ['../components/Logos/NavLogo']\n  }\n});\n\nvar withAuth = function withAuth(Component) {\n  return (\n    /*#__PURE__*/\n    function (_React$Component) {\n      _inherits(_class, _React$Component);\n\n      function _class(props) {\n        var _this;\n\n        _classCallCheck(this, _class);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(_class).call(this, props));\n        _this.state = {\n          status: 'LOADING',\n          user: {}\n        };\n        return _this;\n      }\n\n      _createClass(_class, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          auth.onAuthStateChanged(function (authUser) {\n            if (authUser) {\n              _this2.setState({\n                status: 'SIGNED_IN',\n                user: auth.currentUser\n              });\n            } else {\n              router.push(ROUTES.SIGN_IN);\n            }\n          });\n        }\n      }, {\n        key: \"renderContent\",\n        value: function renderContent() {\n          var _this$state = this.state,\n              status = _this$state.status,\n              user = _this$state.user;\n\n          if (status === 'LOADING') {\n            return React.createElement(\"div\", {\n              className: \"container mx-auto h-full flex justify-center items-center\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 42\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"w-full max-w-sm mt-20\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 43\n              },\n              __self: this\n            }, React.createElement(NavLogo, {\n              center: true,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 44\n              },\n              __self: this\n            }), React.createElement(\"p\", {\n              className: \"text-center mt-2\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 45\n              },\n              __self: this\n            }, \"Loading...\")));\n          } else if (status === 'SIGNED_IN') {\n            return React.createElement(Component, _extends({}, this.props, {\n              user: user,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 51\n              },\n              __self: this\n            }));\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return React.createElement(Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61\n            },\n            __self: this\n          }, this.renderContent());\n        }\n      }]);\n\n      return _class;\n    }(React.Component)\n  );\n};\n\nexport default withAuth;","map":{"version":3,"sources":["/Users/stanleysakai/Developer/upwordly-local/src/helpers/withAuth.js"],"names":["React","Fragment","dynamic","router","auth","ROUTES","NavLogo","withAuth","Component","props","state","status","user","onAuthStateChanged","authUser","setState","currentUser","push","SIGN_IN","renderContent"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,IAAT,QAAqB,sBAArB;AACA,OAAO,KAAKC,MAAZ,MAAwB,qBAAxB;AAEA,IAAMC,OAAO,GAAGJ,OAAO,CAAC;AAAA,SACpB,OAAO,6BAAP,CADoB;AAAA,CAAD;AAAA;AAAA;AAAA,kCACZ,6BADY;AAAA;AAAA,cACZ,6BADY;AAAA;AAAA,EAAvB;;AAGA,IAAMK,QAAQ,GAAG,SAAXA,QAAW,CAAAC,SAAS,EAAI;AAC5B;AAAA;AAAA;AAAA;;AACE,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,oFAAMA,KAAN;AAEA,cAAKC,KAAL,GAAa;AACXC,UAAAA,MAAM,EAAE,SADG;AAEXC,UAAAA,IAAI,EAAE;AAFK,SAAb;AAHiB;AAOlB;;AARH;AAAA;AAAA,4CAUsB;AAAA;;AAClBR,UAAAA,IAAI,CAACS,kBAAL,CAAwB,UAAAC,QAAQ,EAAI;AAClC,gBAAIA,QAAJ,EAAc;AACZ,cAAA,MAAI,CAACC,QAAL,CAAc;AACZJ,gBAAAA,MAAM,EAAE,WADI;AAEZC,gBAAAA,IAAI,EAAER,IAAI,CAACY;AAFC,eAAd;AAID,aALD,MAKO;AACLb,cAAAA,MAAM,CAACc,IAAP,CAAYZ,MAAM,CAACa,OAAnB;AACD;AACF,WATD;AAUD;AArBH;AAAA;AAAA,wCAuBkB;AAAA,4BAIV,KAAKR,KAJK;AAAA,cAEZC,MAFY,eAEZA,MAFY;AAAA,cAGZC,IAHY,eAGZA,IAHY;;AAMd,cAAID,MAAM,KAAK,SAAf,EAA0B;AACxB,mBACI;AAAK,cAAA,SAAS,EAAC,2DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE,oBAAC,OAAD;AAAS,cAAA,MAAM,EAAE,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEE;AAAG,cAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFF,CADF,CADJ;AAQD,WATD,MASO,IAAIA,MAAM,KAAK,WAAf,EAA4B;AACjC,mBACI,oBAAC,SAAD,eACQ,KAAKF,KADb;AAEI,cAAA,IAAI,EAAEG,IAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ;AAMD;AACF;AA9CH;AAAA;AAAA,iCAgDW;AACP,iBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACG,KAAKO,aAAL,EADH,CADJ;AAKD;AAtDH;;AAAA;AAAA,MAAqBnB,KAAK,CAACQ,SAA3B;AAAA;AAwDD,CAzDD;;AA2DA,eAAeD,QAAf","sourcesContent":["import React, { Fragment } from 'react';\nimport dynamic from 'next/dynamic';\nimport router from 'next/router';\nimport { auth } from '../firebase/firebase';\nimport * as ROUTES from '../constants/routes';\n\nconst NavLogo = dynamic(() =>\n    import('../components/Logos/NavLogo'));\n\nconst withAuth = Component => {\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        status: 'LOADING',\n        user: {},\n      };\n    }\n\n    componentDidMount() {\n      auth.onAuthStateChanged(authUser => {\n        if (authUser) {\n          this.setState({\n            status: 'SIGNED_IN',\n            user: auth.currentUser,\n          });\n        } else {\n          router.push(ROUTES.SIGN_IN);\n        }\n      });\n    }\n\n    renderContent() {\n      const {\n        status,\n        user,\n      } = this.state;\n\n      if (status === 'LOADING') {\n        return (\n            <div className=\"container mx-auto h-full flex justify-center items-center\">\n              <div className=\"w-full max-w-sm mt-20\">\n                <NavLogo center={true} />\n                <p className=\"text-center mt-2\">Loading...</p>\n              </div>\n            </div>\n        );\n      } else if (status === 'SIGNED_IN') {\n        return (\n            <Component\n                {...this.props}\n                user={user}\n            />\n        )\n      }\n    }\n\n    render() {\n      return (\n          <Fragment>\n            {this.renderContent()}\n          </Fragment>\n      );\n    }\n  };\n};\n\nexport default withAuth;"]},"metadata":{},"sourceType":"module"}